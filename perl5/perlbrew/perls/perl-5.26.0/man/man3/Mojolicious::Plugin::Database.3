.\" Automatically generated by Pod::Man 4.09 (Pod::Simple 3.35)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
.    ds C`
.    ds C'
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is >0, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.\"
.\" Avoid warning from groff about undefined register 'F'.
.de IX
..
.if !\nF .nr F 0
.if \nF>0 \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    if !\nF==2 \{\
.        nr % 0
.        nr F 2
.    \}
.\}
.\" ========================================================================
.\"
.IX Title "Mojolicious::Plugin::Database 3"
.TH Mojolicious::Plugin::Database 3 "2015-09-25" "perl v5.26.0" "User Contributed Perl Documentation"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH "NAME"
Mojolicious::Plugin::Database \- "proper" handling of DBI based connections in Mojolicious
.SH "VERSION"
.IX Header "VERSION"
version 1.10
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
Provides \*(L"sane\*(R" handling of \s-1DBI\s0 connections so problems with pre-forking (Hypnotoad, etc.) will not occur.
.PP
.Vb 1
\&    use Mojolicious::Plugin::Database;
\&
\&    sub startup {
\&        my $self = shift;
\&
\&        $self\->plugin(\*(Aqdatabase\*(Aq, {
\&            dsn      => \*(Aqdbi:Pg:dbname=foo\*(Aq,
\&            username => \*(Aqmyusername\*(Aq,
\&            password => \*(Aqmypassword\*(Aq,
\&            options  => { \*(Aqpg_enable_utf8\*(Aq => 1, AutoCommit => 0 },
\&            helper   => \*(Aqdb\*(Aq,
\&            });
\&
\&        # or if you require multiple databases at the same time
\&        $self\->plugin(\*(Aqdatabase\*(Aq, {
\&            databases => {
\&                \*(Aqdb1\*(Aq => {
\&                    dsn      => \*(Aqdbi:Pg:dbname=foo\*(Aq,
\&                    username => \*(Aqmyusername\*(Aq,
\&                    password => \*(Aqmypassword\*(Aq,
\&                },
\&                \*(Aqdb2\*(Aq => {
\&                    dsn      => \*(Aqdbi:MySQL:dbname=bar\*(Aq,
\&                    username => \*(Aqothername\*(Aq,
\&                    password => \*(Aqotherpassword\*(Aq,
\&                },
\&            },
\&        });
\&    }
.Ve
.SH "CONFIGURATION"
.IX Header "CONFIGURATION"
.SS "\s-1CONNECTING TO A SINGLE DATABASE\s0"
.IX Subsection "CONNECTING TO A SINGLE DATABASE"
When connecting to a single database, the following configuration options are recognised:
.IP "'dsn'         should contain the \s-1DSN\s0 string required by \s-1DBI\s0" 4
.IX Item "'dsn' should contain the DSN string required by DBI"
.PD 0
.IP "'username'    the username that should be used to authenticate" 4
.IX Item "'username' the username that should be used to authenticate"
.IP "'password'    the password that should be used to authenticate" 4
.IX Item "'password' the password that should be used to authenticate"
.IP "'options'     options to pass to the \s-1DBD\s0 driver" 4
.IX Item "'options' options to pass to the DBD driver"
.IP "'helper'      the name of the helper to associate with this database (default: db)" 4
.IX Item "'helper' the name of the helper to associate with this database (default: db)"
.PD
.PP
The only required option is 'dsn', every other option is optional.
.SS "\s-1CONNECTING TO MULTIPLE DATABASES\s0"
.IX Subsection "CONNECTING TO MULTIPLE DATABASES"
When you have the need to connect to multiple databases (or different \s-1RDBMS\s0 types), the following options are recognised:
.IP "'databases'   A hash reference whose key is the helper name, and the value is another hash reference containing connection options." 4
.IX Item "'databases' A hash reference whose key is the helper name, and the value is another hash reference containing connection options."
.SH "METHODS/HELPERS"
.IX Header "METHODS/HELPERS"
A helper is created with a name you specified (or 'db' by default) that can be used to get the active \s-1DBI\s0 connection. When using multiple databases, you also get multiple helpers.
.SH "AUTHOR"
.IX Header "AUTHOR"
Ben van Staveren, \f(CW\*(C`<madcat at cpan.org>\*(C'\fR
.SH "BUGS/CONTRIBUTING"
.IX Header "BUGS/CONTRIBUTING"
Please report any bugs or feature requests to through the web interface at <https://github.com/benvanstaveren/mojolicious\-plugin\-database/issues>.
If you want to contribute changes or otherwise involve yourself in development, feel free to fork the Git repository from <https://github.com/benvanstaveren/mojolicious\-plugin\-database/>.
.SH "SUPPORT"
.IX Header "SUPPORT"
You can find documentation for this module with the perldoc command.
.PP
.Vb 1
\&    perldoc Mojolicious::Plugin::Database
.Ve
.PP
You can also look for information at:
.IP "\(bu" 4
AnnoCPAN: Annotated \s-1CPAN\s0 documentation
.Sp
<http://annocpan.org/dist/Mojolicious\-Plugin\-Database>
.IP "\(bu" 4
\&\s-1CPAN\s0 Ratings
.Sp
<http://cpanratings.perl.org/d/Mojolicious\-Plugin\-Database>
.IP "\(bu" 4
Search \s-1CPAN\s0
.Sp
<http://search.cpan.org/dist/Mojolicious\-Plugin\-Database/>
.SH "ACKNOWLEDGEMENTS"
.IX Header "ACKNOWLEDGEMENTS"
Based on a small example by sri and his request if someone could please write a plugin for this stuff.
.PP
alabamapaul (github) for fixing the tests to work on Windows.
.PP
Babatope Aloba for pointing out it'd be really useful to be able to connect to multiple databases at once.
.SH "LICENSE AND COPYRIGHT"
.IX Header "LICENSE AND COPYRIGHT"
Copyright 2011\-2015 Ben van Staveren.
.PP
This program is free software; you can redistribute it and/or modify it
under the terms of either: the \s-1GNU\s0 General Public License as published
by the Free Software Foundation; or the Artistic License.
.PP
See http://dev.perl.org/licenses/ for more information.
